/***************************
File generated by shrinker.ch
DateTime: 2013-06-14, 16:10:36
File list:
    * overlayBox.js
*****************************/
(function(b){b.fn.extend({overlayBox:function(g,h){var e=this;this.defaults={layoutId:"",closeBtnId:"#overlay-close",contentBlockWidth:"500",onOverlayLoaded:function(a){console.info(a)},onOverlayClosed:function(){console.info("CLOSED OVERLAY")}};this.plugin={el:undefined,options:undefined,htmlData:undefined,onOverlayLoaded:undefined,onOverlayClosed:undefined,overlayContentClass:undefined,contentBlockWidth:undefined,zIndexValue:undefined,closeBtnId:undefined,closeBtnEl:undefined,layoutEl:undefined,
overlayContentEl:undefined,dataFromServer:undefined,initialize:function(a,c,d){this.el=b(a);this.options=c;this.htmlData=d;this.onOverlayLoaded=this.options.onOverlayLoaded;this.onOverlayClosed=this.options.onOverlayClosed;this.overlayContentClass="overlay-content";this.contentBlockWidth=this.options.contentBlockWidth;this.zIndexValue=this.options.zIndexValue;this.closeBtnId=this.options.closeBtnId;this.closeBtnEl=undefined;if(this.options.layoutId!=="")this.layoutEl=b("#"+this.options.layoutId);
if(b.isPlainObject(this.htmlData))this.dataFromServer=this.htmlData.dataFromServer;this.displayOverlay()},displayOverlay:function(){this.el.css(this.htmlData!==""&&this.layoutEl===undefined?{width:b(document).width(),height:b(document).height(),zIndex:this.zIndexValue}:{width:this.layoutEl.width(),height:this.layoutEl.height(),zIndex:this.zIndexValue}).animate({opacity:1},this.displayContent())},displayContent:function(){if(typeof this.htmlData==="string"){this.el.append("<div class="+this.overlayContentClass+
">"+this.htmlData+"</div>");this.renderContent()}else this.dataFromServer!==undefined?this.getHtmlData():this.renderContent()},renderContent:function(){if(this.closeBtnId!==undefined)this.closeBtnEl=b(this.closeBtnId);this.addEvents();b.when(this.setCenterContent()).done(this.setCenterDone())},getHtmlData:function(){var a=this;b.ajax({beforeSend:this.generateLoader(),type:this.dataFromServer.method,dataType:this.dataFromServer.dataType,url:this.dataFromServer.url,pluginObj:this,statusCode:{404:function(){a.error_404()}}}).done(this.ajaxSuccess).fail(this.ajaxError)},
generateLoader:function(){this.el.append("<div class="+this.overlayContentClass+"><img src="+this.dataFromServer.loaderIcon+' alt="" id='+this.dataFromServer.loaderId+" /></div>")},ajaxSuccess:function(a){var c=this.pluginObj,d,f=c.el.find("#"+c.dataFromServer.loaderId);f.after("<div class='loaded-content serverdata'>"+a+"</div>");d=c.el.find(".loaded-content");c.renderContent();f.fadeOut(function(){b(this).remove();d.fadeIn()})},ajaxError:function(a){console.info(a)},error_404:function(){var a=this.el.find("#"+
this.dataFromServer.loaderId);a.after("<div class='error-content serverdata'>"+this.dataFromServer.error_404_html+"</div>");loadedContentEl=this.el.find(".error-content");this.renderContent();a.fadeOut(function(){b(this).remove();loadedContentEl.fadeIn()})},setCenterContent:function(){var a,c,d;a=this.el.find("."+this.overlayContentClass);this.overlayContentEl=typeof this.htmlData==="object"&&this.dataFromServer===undefined?a.eq(parseInt(this.htmlData.data("overlay-btn-id"))-1):a.eq(0);a=this.overlayContentEl.children(".serverdata").size()>
0?this.dataFromServer.loadedContentHeight:this.overlayContentEl.height();a=(this.el.height()-a)/2;c=(this.el.width()-this.contentBlockWidth)/2;d=b(document).scrollTop();if(d>0)a=d+this.overlayContentEl.height()/4;this.overlayContentEl.css({margin:"0 auto",position:"absolute",top:a,left:c,width:this.contentBlockWidth+"px"})},setCenterDone:function(){this.overlayContentEl.css({visibility:"visible"});this.el.trigger("onOverlayLoaded")},hideOverlay:function(a){a.preventDefault();a.stopPropagation();var c=
a.data.obj;if(a.keyCode===27||a.target.id==="overlay")c.el.animate({opacity:0},function(){c.animateHideCallback(c)})},animateHideCallback:function(a){typeof a.htmlData==="string"||a.dataFromServer!==undefined?a.overlayContentEl.remove():a.overlayContentEl.css({visibility:"hidden"});a.el.css({width:0,height:0,zIndex:0});a.removeEvents();if(typeof a.onOverlayClosed==="function")a.onOverlayClosed()},runOverlayLoaded:function(a){a=a.data.obj;if(typeof a.onOverlayLoaded==="function")a.onOverlayLoaded(a.overlayContentEl)},
addEvents:function(){if(this.closeBtnEl!==undefined)this.closeBtnEl.on({"click.overlayEvent":this.hideOverlay},{obj:this});b(window).on({"keydown.overlayEvent":this.hideOverlay},{obj:this});this.el.on({"onOverlayLoaded.overlayEvent":this.runOverlayLoaded,"click.overlayEvent":this.hideOverlay},{obj:this})},removeEvents:function(){this.el.off(".overlayEvent");b(window).off(".overlayEvent");this.closeBtnEl.size()>0&&this.closeBtnEl.off(".overlayEvent")}};this.init=function(a){b.proxy(e.plugin.initialize(this,
a,h),e.plugin)};e.options=b.extend(e.defaults,g);e.init(e.options);constructor=void 0}})})(jQuery);

